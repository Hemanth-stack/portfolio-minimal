{% extends "admin/base.html" %}

{% block title %}Edit {{ page.title }}{% endblock %}

{% block content %}
<h1>Edit {{ page.title }}</h1>

<form method="POST">
    <label for="title">Title</label>
    <input type="text" name="title" id="title" value="{{ page.title }}" required>
    
    <label for="content">Content (Markdown)</label>
    <textarea name="content" id="content" rows="20" required>{{ page.content }}</textarea>
    
    <button type="submit">Update Page</button>
    <a href="/admin/pages" class="btn btn-secondary">Cancel</a>
</form>

<h3>Preview</h3>
<div id="preview"></div>

{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
const content = document.getElementById('content');
const preview = document.getElementById('preview');

content.addEventListener('input', () => {
    preview.innerHTML = marked.parse(content.value);
});
preview.innerHTML = marked.parse(content.value);
</script>
{% endblock %}
