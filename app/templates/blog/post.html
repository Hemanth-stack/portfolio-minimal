{% extends "base.html" %}

{% block title %}{{ post.title }} – {{ site.site_name }}{% endblock %}
{% block description %}{{ post.excerpt }}{% endblock %}
{% block og_type %}article{% endblock %}
{% block og_title %}{{ post.title }}{% endblock %}
{% block og_description %}{{ post.excerpt }}{% endblock %}

{% block content %}
<article class="blog-post">
    <header class="post-header">
        <h1>{{ post.title }}</h1>
        <p class="post-meta">
            {{ post.created_at.strftime('%B %d, %Y') }} · {{ read_time }} min read
        </p>
        {% if post.categories %}
        <div class="post-categories">
            {% for cat in post.categories %}
            <a href="/blog/category/{{ cat.slug }}" class="category-badge">{{ cat.name }}</a>
            {% endfor %}
        </div>
        {% endif %}
        {% if post.tags %}
        <div class="tags">
            {% for tag in post.tags %}
            <a href="/blog/tag/{{ tag.slug }}" class="tag">{{ tag.name }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </header>
    
    <div class="post-content">
        {{ content | safe }}
    </div>
    
    {# Share buttons #}
    <div class="share-buttons">
        <span>Share:</span>
        <a href="https://twitter.com/intent/tweet?url={{ request.url }}&text={{ post.title }}" 
           target="_blank" rel="noopener">Twitter</a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.url }}&title={{ post.title }}" 
           target="_blank" rel="noopener">LinkedIn</a>
    </div>
</article>

<section class="comments" id="comments">
    <h2>Comments</h2>
    
    {% if comments %}
    {% for comment in comments %}
    <div class="comment">
        <div class="comment-meta">
            <strong>{{ comment.author_name }}</strong> · {{ comment.created_at.strftime('%b %d, %Y') }}
        </div>
        <p>{{ comment.content }}</p>
    </div>
    {% endfor %}
    {% else %}
    <p class="muted">No comments yet. Be the first!</p>
    {% endif %}
    
    <h3>Leave a comment</h3>
    <form method="POST" action="/blog/{{ post.slug }}/comment" class="comment-form">
        <label for="author_name">Name</label>
        <input type="text" name="author_name" id="author_name" required placeholder="Your name">
        
        <label for="author_email">Email (won't be published)</label>
        <input type="email" name="author_email" id="author_email" required placeholder="your@email.com">
        
        <label for="content">Comment</label>
        <textarea name="content" id="content" required placeholder="Your thoughts..."></textarea>
        
        <button type="submit">Submit Comment</button>
    </form>
</section>

<hr>
<p><a href="/blog">← Back to all posts</a></p>
{% endblock %}
